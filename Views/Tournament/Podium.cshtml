@{
    ViewData["Title"] = "Podio de Ganadores";
    var category = ViewBag.Category;
    var winner = ViewBag.Winner as RoboticsFixture.Models.Competitor;
    var runnerUp = ViewBag.RunnerUp as RoboticsFixture.Models.Competitor;
    var thirdPlace = ViewBag.ThirdPlace as RoboticsFixture.Models.Competitor;
}

<div class="podium-screen">
    <h1 class="podium-title">
        <i class="fas fa-trophy me-3"></i>
        ¡TORNEO FINALIZADO!
    </h1>

    <div class="podium-container">
        @if (runnerUp != null)
        {
            <div class="podium-place">
                <div class="trophy-icon silver">
                    <i class="fas fa-medal"></i>
                </div>
                <div class="place-number silver">
                    2º LUGAR
                </div>
                <div class="winner-name">@runnerUp.Name</div>
                <div class="winner-team">@runnerUp.Team</div>
            </div>
        }
        else
        {
            <div class="podium-place" style="opacity: 0.5;">
                <div class="trophy-icon silver">
                    <i class="fas fa-medal"></i>
                </div>
                <div class="place-number silver">
                    2º LUGAR
                </div>
                <div class="winner-name">-</div>
            </div>
        }

        @if (winner != null)
        {
            <div class="podium-place">
                <div class="trophy-icon gold">
                    <i class="fas fa-trophy"></i>
                </div>
                <div class="place-number gold">
                    🏆 CAMPEÓN 🏆
                </div>
                <div class="winner-name" style="font-size: 2rem;">@winner.Name</div>
                <div class="winner-team" style="font-size: 1.3rem;">@winner.Team</div>
            </div>
        }
        else
        {
            <div class="podium-place">
                <div class="trophy-icon gold">
                    <i class="fas fa-trophy"></i>
                </div>
                <div class="place-number gold">
                    🏆 CAMPEÓN 🏆
                </div>
                <div class="winner-name" style="font-size: 2rem;">-</div>
            </div>
        }

        @if (thirdPlace != null)
        {
            <div class="podium-place">
                <div class="trophy-icon bronze">
                    <i class="fas fa-medal"></i>
                </div>
                <div class="place-number bronze">
                    3º LUGAR
                </div>
                <div class="winner-name">@thirdPlace.Name</div>
                <div class="winner-team">@thirdPlace.Team</div>
            </div>
        }
        else
        {
            <div class="podium-place" style="opacity: 0.5;">
                <div class="trophy-icon bronze">
                    <i class="fas fa-medal"></i>
                </div>
                <div class="place-number bronze">
                    3º LUGAR
                </div>
                <div class="winner-name">-</div>
            </div>
        }
    </div>

    <div class="podium-actions">
        <a asp-action="Index" class="btn btn-primary btn-lg">
            <i class="fas fa-home me-2"></i>
            Volver al Inicio
        </a>
        <form asp-action="ResetTournament" method="post" onsubmit="return confirm('¿Desea reiniciar el torneo?');" style="display:inline;">
            <input type="hidden" name="category" value="@category" />
            <button type="submit" class="btn btn-warning btn-lg">
                <i class="fas fa-redo me-2"></i>
                Reiniciar Torneo
            </button>
        </form>
    </div>
</div>

@section Scripts {
    <script>
        // Solo crear confetti si hay al menos un ganador
        @if (winner != null)
        {
                // Usa @: para que Razor no corte el bloque
                @:for (let i = 0; i < 100; i++) {
                @:    setTimeout(() => createConfetti(), i * 30);
                @:}

                @:function createConfetti() {
                @:    const confetti = document.createElement('div');
                @:    confetti.className = 'confetti';
                @:    confetti.style.left = Math.random() * 100 + '%';
                @:    confetti.style.animationDelay = Math.random() * 2 + 's';
                @:    confetti.style.animationDuration = (Math.random() * 2 + 2) + 's';
                @:    const colors = ['#00e5ff', '#ffd700', '#ff9f00', '#a855f7', '#00ff88', '#c0c0c0', '#cd7f32'];
                @:    confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
                @:    confetti.style.width = (Math.random() * 10 + 5) + 'px';
                @:    confetti.style.height = confetti.style.width;
                @:    document.querySelector('.podium-screen').appendChild(confetti);
                @:    setTimeout(() => confetti.remove(), 5000);
                @:}

                @:setInterval(() => {
                @:    for (let i = 0; i < 5; i++) createConfetti();
                @:}, 500);
        }
    </script>
}


<style>
/* 🔹 Estilos para el confetti */
.confetti {
    position: absolute;
    top: -10px;
    width: 10px;
    height: 10px;
    border-radius: 50%;
    animation-name: fall;
    animation-timing-function: linear;
}

/* 🔹 Animación CSS real */
<style >
@@keyframes fall {
    0%

{
    transform: translateY(0) rotate(0deg);
    opacity: 1;
}

100% {
    transform: translateY(500px) rotate(720deg);
    opacity: 0;
}

}
</style>


